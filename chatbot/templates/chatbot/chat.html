
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'chatbot/favicon.ico' %}">
    <title>Chat</title>
    <style>
        #wrap {
            margin: 0 auto;
        }
        #logo {
            color: #8BC34A;
        }
        #chatbox {
            width: 20em;
            height: 20em;
            border: 1px solid black;
            overflow: auto;
            margin: 1em 0;
        }
        #userInput {
            width: 19.7em;
        }
    </style>
</head>
<body>
    <div id="wrap">
        <h1 id="logo">&real;&Theta;&Zeta; &hearts; &Beta;&theta;&Tau; <span id="current_chat_id"></span> </h1>
        <p> Rasa based Chatbot</p>

        <input type="hidden" id="chat_id" value="">

        <button id="startChatButton">Start Chat</button> 
        <button id="endChatButton">End Chat</button>
        <br><br>
        <div id="chatbox">
            <!-- Chat messages will be added here -->
        </div>
        <input id="userInput" type="text" />
        <button id="sendButton">Send</button>
    </div> 


    <script src="{% static 'chatbot/chat.js' %}"></script>
    <script type="text/javascript">
        const chat_data = {{ chat_data|safe }};
        const chatid = {{ chat_id|safe }};
        // Check if chat_data is available and populate
        if (chat_data && Array.isArray(chat_data)) {
            document.getElementById('current_chat_id').innerHTML = chatid
            console.log('populating chat_data', chat_data);
            if (chat_data.length > 0 ) {
                populate_chat(chat_data);
            }
            else {
                console.log('nothing to show for.... ');
            }
        }
    </script>
</body>
</html>
